from matplotlib import pyplot
from shapely.geometry.polygon import LinearRing, Polygon
from shapely.geometry import Point
import matplotlib.pyplot as plt



def main():
    c_center = (2,2)
    c_radius = 3

    points_1 = [[6,0],[9,0],[3,5]]
    points_2 = [[1,0],[-1,0],[6.5,4]]
    points_3 = [[3, 3], [3, 8], [5, 12], [8, 0]]

    center = Point(c_center)
    circle = center.buffer(c_radius)

    poly1 = Polygon(points_1)
    poly2 = Polygon(points_2)
    poly3 = Polygon(points_3)

    polys = [poly1, circle, poly3]

    intersection = get_intersection(poly2, polys)
    intersection_centroid = intersection.centroid.coords

    x = intersection_centroid.xy[0][0]
    y = intersection_centroid.xy[1][0]


    poly = Polygon([ [3.185470076472911, 0.0975229457412785], [3.783101113015055, -0.4744565268132823], [2.594116263704997, -0.3602912221962973], [3.185470076472911, 0.0975229457412785] ])
    o_obk = Polygon( [ [3.261650759234308,0.534884544320006], [3.259083464298711,
    0.4826260553746714], [3.251406303945577,
    0.4308708442452763], [3.238693213425868,
    0.3801173419072732], [3.221066626750972,
    0.3308543323328635], [3.19869629758624,
    0.2835562452341492], [3.171797664430395,
    0.2386785870456554], [3.140629775825016,
    0.1966535541483608], [3.105492795575475,
    0.1578858705822861], [3.0667251120094,
    0.1227488903327442], [3.024700079112105,
    0.09158100172736527],[ 2.979822420923611,
    0.06468236857152032], [2.932524333824897,
    0.04231203940678874], [2.883261324250488,
    0.02468545273189271], [2.832507821912484,
    0.0119723622121839], [2.78075261078309,
    0.004295201859049413],[ 2.728494121837755,
    0.001727906923452482],[ 2.67623563289242,
    0.004295201859049191],[ 2.624480421763025,
    0.01197236221218367], [2.573726919425022,
    0.02468545273189227],[ 2.524463909850613,
    0.04231203940678813],[ 2.477165822751898,
    0.06468236857151949],[ 2.432288164563404,
    0.09158100172736439],[ 2.39026313166611,
    0.1227488903327431], [2.351495448100034,
    0.1578858705822851], [2.316358467850493,
    0.1966535541483598], [2.285190579245114,
    0.2386785870456544], [2.258291946089269,
    0.2835562452341482], [2.235921616924537,
    0.3308543323328626], [2.218295030249641,
    0.3801173419072723], [2.205581939729932,
    0.4308708442452756], [2.197904779376797,
    0.4826260553746707], [2.1953374844412,
    0.5348845443200054], [2.197904779376797,
    0.5871430332653401], [2.205581939729932,
    0.6388982443947353], [2.21829503024964,
    0.6896517467327385], [2.235921616924537,
    0.7389147563071483], [2.258291946089268,
    0.7862128434058628], [2.285190579245113,
    0.8310905015943566], [2.316358467850492,
    0.8731155344916512], [2.351495448100034,
    0.9118832180577261], [2.390263131666108,
    0.947020198307268], [2.432288164563403,
    0.9781880869126468],[ 2.477165822751897,
    1.005086720068492], [2.524463909850611,
    1.027457049233223], [2.57372691942502,
    1.045083635908119], [2.624480421763023,
    1.057796726427828], [2.676235632892418,
    1.065473886780963], [2.728494121837753,
    1.06804118171656], [2.780752610783087,
    1.065473886780963], [2.832507821912482,
    1.057796726427829], [2.883261324250485,
    1.04508363590812], [2.932524333824895,
    1.027457049233224],[ 2.979822420923609,
    1.005086720068493], [3.024700079112103,
    0.9781880869126485],[ 3.066725112009397,
    0.9470201983072699], [3.105492795575472,
    0.9118832180577283], [3.140629775825014,
    0.8731155344916539], [3.171797664430393,
    0.8310905015943595], [3.198696297586238,
    0.7862128434058661], [3.22106662675097,
    0.7389147563071521], [3.238693213425866,
    0.6896517467327427], [3.251406303945576,
    0.6388982443947397], [3.25908346429871,
    0.5871430332653448], [3.261650759234308,
    0.5348845443200104], [3.261650759234308,
    0.534884544320006]])


    fig, axs = plt.subplots()

    plot_object(poly, axs)
    plot_object(o_obk, axs)

    #plot_object(poly1, axs)
    #plot_object(poly2, axs)
    #plot_object(poly3, axs)
    #plot_object(circle, axs)
    #plot_object(intersection, axs, color='r')


    plt.show() #if not interactive



def get_intersection(obj, o_objects):

    ret = obj.intersection(o_objects[0])

    if len(o_objects) >= 2:
        for o_obj in o_objects:
            ret = ret.intersection(o_obj)

    return ret





def plot_object(obj, axs, color='b'):
    xs, ys = obj.exterior.xy
    axs.fill(xs, ys, alpha=0.5, fc=color, ec='none')



main()